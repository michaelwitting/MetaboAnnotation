<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Representation of generic objects matches — Matched • MetaboAnnotation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Representation of generic objects matches — Matched" />
<meta property="og:description" content="Matches between query and target generic objects can be represented by the
Matched object. By default, all data accessors work as
left joins between the query and the target object, i.e. values are
returned for each query object with eventual duplicated entries (values)
if the query object matches more than one target object. See also
Creation and subsetting as well as Extracting data sections below for
details and more information" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MetaboAnnotation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/MetaboAnnotation.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RforMassSpectrometry/MetaboAnnotation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Representation of generic objects matches</h1>
    <small class="dont-index">Source: <a href='https://github.com/RforMassSpectrometry/MetaboAnnotation/blob/master/R/Matched.R'><code>R/Matched.R</code></a></small>
    <div class="hidden name"><code>Matched.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Matches between query and target generic objects can be represented by the
<code>Matched</code> object. By default, all data accessors work as
<em>left joins</em> between the <em>query</em> and the <em>target</em> object, i.e. values are
returned for each <em>query</em> object with eventual duplicated entries (values)
if the query object matches more than one target object. See also
<em>Creation and subsetting</em> as well as <em>Extracting data</em> sections below for
details and more information</p>
    </div>

    <div class="ref-usage sourceCode"><pre><code>Matched(
  query = list(),
  target = list(),
  matches = data.frame(query_idx = integer(), target_idx = integer(), score =
    numeric())
)

# S4 method for Matched
length(x)

# S4 method for Matched
show(object)

# S4 method for Matched
[(x, i, j, ..., drop = FALSE)

target(object)

query(object)

whichTarget(object)

whichQuery(object)

# S4 method for Matched
$(x, name)

# S4 method for Matched
colnames(x)

matchedData(object, ...)

# S4 method for Matched
matchedData(object, columns = colnames(object), ...)

pruneTarget(object)</code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>query</th>
      <td><p>object with the query elements.</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>object with the elements against which <code>query</code> has been
matched.</p></td>
    </tr>
    <tr>
      <th>matches</th>
      <td><p><code>data.frame</code> with columns <code>"query_idx"</code> (<code>integer</code>),
<code>"target_idx"</code> (<code>integer</code>) and <code>"score"</code> (<code>numeric</code>) representing the n:m
mapping of elements between the <code>query</code> and the <code>target</code> objects.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p><code>Matched</code> object.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>a <code>Matched</code> object.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p><code>integer</code> or <code>logical</code> defining the <code>query</code> elements to keep.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>for <code>[</code>: ignored.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional parameters.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>for <code>[</code>: ignored.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>for <code>$</code>: the name of the column (or variable) to extract.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>for <code>matchedData</code>: <code>character</code> vector with column names of
variables that should be extracted.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>See individual method description above for details.</p>
    <h2 class="hasAnchor" id="creation-and-subsetting"><a class="anchor" href="#creation-and-subsetting"></a>Creation and subsetting</h2>

    


<p><code>Matched</code> objects can be created with the <code>Matched</code> function
providing the <code>query</code> and <code>target</code> object as well as the <code>matches</code>
<code>data.frame</code> with two columns of integer indices defining which elements
from <em>query</em> match which element from <em>target</em>.</p>
<p>A <code>Matched</code> object can be subsetted in the following ways:</p><ul>
<li><p><code>[</code> subset the <code>Matched</code> selecting <code>query</code> object elements to keep with
parameter <code>i</code>. The resulting <code>Matched</code> object will contain all the matches
for the selected query elements. The <code>target</code> object will by default be
returned as-is.</p></li>
<li><p><code>pruneTarget</code> <em>cleans</em> the <code>Matched</code> object by removing non-matched
target elements.</p></li>
</ul>

    <h2 class="hasAnchor" id="extracting-data"><a class="anchor" href="#extracting-data"></a>Extracting data</h2>

    

<ul>
<li><p><code>$</code> extracts a single variable from the <code>Matched</code> <code>x</code>. The variables that
can be extracted can be listed using <code>colnames(x)</code>. These variables can
belong to <em>query</em>, <em>target</em> or be related to the matches (e.g. the
score of each match). If the <em>query</em> (<em>target</em>) object is two dimensional,
its columns can be extracted (prefix<code> "target_"</code> is used for columns in the
<em>target</em> object) otherwise (if <em>query</em> respectively <em>target</em> does have only
a single dimension (e.g. is a <code>list</code> or a <code>character</code>) the whole object can
is extracted with <code>x$query</code> (<code>x$target</code>).
The matching scores are available as <em>variable</em>
<code>"score"</code>. Similar to a left join between the query and target elements,
this function returns a value for each query element, with eventual
duplicated values for query elements matching more than one target element.
If variables from the target <code>data.frame</code> are extracted, an <code>NA</code> is
reported for the entries corresponding to <em>query</em> elements that don't match
any target element. See examples below for more details.</p></li>
<li><p><code>length</code> returns the number of <strong>query</strong> elements.</p></li>
<li><p><code>matchedData</code> allows to extract multiple variables contained in the
<code>Matched</code> object as a <code>DataFrame</code>. Parameter <code>columns</code> allows to
define which columns (or variables) should be returned (defaults to
<code>columns = colnames(object)</code>). Each single column in the returned
<code>DataFrame</code> is constructed in the same way as in <code>$</code>. That is, like <code>$</code>,
this function performs a <em>left join</em> of variables from the <em>query</em> and
<em>target</em> objects returning all values for all query elements (eventually
returning duplicated elements for query elements matching multiple target
elements) and the values for the target elements matched to the respective
query elements (or <code>NA</code> if the target element is not matched to any query
element).</p></li>
<li><p><code>target</code> returns the <em>target</em> object.</p></li>
<li><p><code>query</code> returns the <em>query</em> object.</p></li>
<li><p><code>whichTarget</code> returns an <code>integer</code> with the indices of the elements in
<em>target</em> that match at least one element in <em>query</em>.</p></li>
<li><p><code>whichQuery</code> returns an <code>integer</code> with the indices of the elements in
<em>query</em> that match at least one element in <em>target</em>.</p></li>
</ul>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Andrea Vicini, Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'></span>
<span class='r-in'><span class='co'>## Creating a Matched object.</span></span>
<span class='r-in'><span class='va'>q1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>col1 <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, col2 <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>t1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>col1 <span class='op'>=</span> <span class='fl'>11</span><span class='op'>:</span><span class='fl'>16</span>, col2 <span class='op'>=</span> <span class='fl'>17</span><span class='op'>:</span><span class='fl'>22</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## Define matches between query row 1 with target row 2 and, query row 2</span></span>
<span class='r-in'><span class='co'>## with target rows 2,3,4 and query row 5 with target row 5.</span></span>
<span class='r-in'><span class='va'>mo</span> <span class='op'>&lt;-</span> <span class='fu'>Matched</span><span class='op'>(</span></span>
<span class='r-in'>    <span class='va'>q1</span>, <span class='va'>t1</span>, matches <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>query_idx <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/S4Vectors/man/Vector-class.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>5L</span><span class='op'>)</span>,</span>
<span class='r-in'>                                target_idx <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/S4Vectors/man/Vector-class.html'>c</a></span><span class='op'>(</span><span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span><span class='op'>)</span>,</span>
<span class='r-in'>                                 score <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0.9</span>, by <span class='op'>=</span> <span class='fl'>0.1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mo</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Object of class Matched </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Total number of matches: 5 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of query objects: 5 (3 matched)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of target objects: 6 (4 matched)</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Which of the query elements (rows) match at least one target</span></span>
<span class='r-in'><span class='co'>## element (row)?</span></span>
<span class='r-in'><span class='fu'>whichQuery</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 1 2 5</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Which target elements (rows) match at least one query element (row)?</span></span>
<span class='r-in'><span class='fu'>whichTarget</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 2 3 4 5</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Extracting variable "col1" from query object .</span></span>
<span class='r-in'><span class='va'>mo</span><span class='op'>$</span><span class='va'>col1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 1 2 2 2 3 4 5</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## We have duplicated values for the entries of `col1` related to query</span></span>
<span class='r-in'><span class='co'>## elements (rows) matched to multiple rows of the target object). The</span></span>
<span class='r-in'><span class='co'>## value of `col1` is returned for each element (row) in the query.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Extracting variable "col1" from target object. To access columns from</span></span>
<span class='r-in'><span class='co'>## target we have to prefix the name of the column by `"target_"`.</span></span>
<span class='r-in'><span class='co'>## Note that only values of `col1` for rows matching at least one query</span></span>
<span class='r-in'><span class='co'>## row are returned and an NA is reported for query rows without matching</span></span>
<span class='r-in'><span class='co'>## target rows.</span></span>
<span class='r-in'><span class='va'>mo</span><span class='op'>$</span><span class='va'>target_col1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 12 12 13 14 NA NA 15</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The 3rd and 4th query rows do not match any target row, thus `NA` is</span></span>
<span class='r-in'><span class='co'>## returned.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## `matchedData` can be used to extract all (or selected) columns</span></span>
<span class='r-in'><span class='co'>## from the object. Same as with `$`, a left join between the columns</span></span>
<span class='r-in'><span class='co'>## from the query and the target is performed. Below we extract selected</span></span>
<span class='r-in'><span class='co'>## columns from the object as a DataFrame.</span></span>
<span class='r-in'><span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>matchedData</span><span class='op'>(</span><span class='va'>mo</span>, columns <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/S4Vectors/man/Vector-class.html'>c</a></span><span class='op'>(</span><span class='st'>"col1"</span>, <span class='st'>"col2"</span>, <span class='st'>"target_col1"</span>, <span class='st'>"target_col2"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>res</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> DataFrame with 7 rows and 4 columns</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>          col1      col2 target_col1 target_col2</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     &lt;integer&gt; &lt;integer&gt;   &lt;integer&gt;   &lt;integer&gt;</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1           1         6          12          18</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2           2         7          12          18</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2.1         2         7          13          19</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2.2         2         7          14          20</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3           3         8          NA          NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4           4         9          NA          NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5           5        10          15          21</span>
<span class='r-in'><span class='va'>res</span><span class='op'>$</span><span class='va'>col1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 1 2 2 2 3 4 5</span>
<span class='r-in'><span class='va'>res</span><span class='op'>$</span><span class='va'>target_col1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 12 12 13 14 NA NA 15</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The example matched object contains all query and all target</span></span>
<span class='r-in'><span class='co'>## elements (rows). Below we subset the object keeping only query rows that</span></span>
<span class='r-in'><span class='co'>## are matched to at least one target row.</span></span>
<span class='r-in'><span class='va'>mo_sub</span> <span class='op'>&lt;-</span> <span class='va'>mo</span><span class='op'>[</span><span class='fu'>whichQuery</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>]</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## ms_sub contains now only 3 query rows:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>query</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 3</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## while the original object contains all 5 query rows:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>query</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 5</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Both object contain however still the full target object:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 6</span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 6</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## With the `pruneTarget` we can however reduce also the target rows to</span></span>
<span class='r-in'><span class='co'>## only those that match at least one query row</span></span>
<span class='r-in'><span class='va'>mo_sub</span> <span class='op'>&lt;-</span> <span class='fu'>pruneTarget</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 4</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Creating a Matched object with a `data.frame` for `query` and a `vector`</span></span>
<span class='r-in'><span class='co'>## for `target`. The matches are specified in the same way as the example</span></span>
<span class='r-in'><span class='co'>## before.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>q1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>col1 <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, col2 <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>t2</span> <span class='op'>&lt;-</span> <span class='fl'>11</span><span class='op'>:</span><span class='fl'>16</span></span>
<span class='r-in'><span class='va'>mo</span> <span class='op'>&lt;-</span> <span class='fu'>Matched</span><span class='op'>(</span><span class='va'>q1</span>, <span class='va'>t2</span>, matches <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>query_idx <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/S4Vectors/man/Vector-class.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>5L</span><span class='op'>)</span>,</span>
<span class='r-in'>    target_idx <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/S4Vectors/man/Vector-class.html'>c</a></span><span class='op'>(</span><span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span><span class='op'>)</span>, score <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0.9</span>, by <span class='op'>=</span> <span class='fl'>0.1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## *target* is a simple vector and has thus no columns. The matched values</span></span>
<span class='r-in'><span class='co'>## from target, if it does not have dimensions and hence column names, can</span></span>
<span class='r-in'><span class='co'>## be retrieved with `$target`</span></span>
<span class='r-in'><span class='va'>mo</span><span class='op'>$</span><span class='va'>target</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 12 12 13 14 NA NA 15</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Note that in this case "target" is returned by the function `colnames`</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "col1"   "col2"   "target" "score" </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## As before, we can extract all data as a `DataFrame`</span></span>
<span class='r-in'><span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>matchedData</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>res</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> DataFrame with 7 rows and 4 columns</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>          col1      col2    target     score</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     &lt;integer&gt; &lt;integer&gt; &lt;integer&gt; &lt;numeric&gt;</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1           1         6        12       0.5</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2           2         7        12       0.6</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2.1         2         7        13       0.7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2.2         2         7        14       0.8</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3           3         8        NA        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4           4         9        NA        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5           5        10        15       0.9</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Note that the columns of the obtained `DataFrame` are the same as the</span></span>
<span class='r-in'><span class='co'>## corresponding vectors obtained with `$`</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>res</span><span class='op'>$</span><span class='va'>col1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 1 2 2 2 3 4 5</span>
<span class='r-in'><span class='va'>res</span><span class='op'>$</span><span class='va'>target</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 12 12 13 14 NA NA 15</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Also subsetting and pruning works in the same way as the example above.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>mo_sub</span> <span class='op'>&lt;-</span> <span class='va'>mo</span><span class='op'>[</span><span class='fu'>whichQuery</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>]</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## mo_sub contains now only 3 query rows:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>query</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 3</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## while the original object contains all 5 query rows:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>query</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 5</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Both object contain however still the full target object:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 6</span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 6</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Reducing the target elements to only those that match at least one query row</span></span>
<span class='r-in'><span class='va'>mo_sub</span> <span class='op'>&lt;-</span> <span class='fu'>pruneTarget</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'>target</span><span class='op'>(</span><span class='va'>mo_sub</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NULL</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by RforMassSpectrometry Package Maintainer, Michael Witting, Johannes Rainer, Andrea Vicini.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


